<div id="top_navigation">
</div>

<div class="row">
  <!-- form component -->
  <div class="col-xs-12">
    <div class="panel">
      <div class="panel-body">
      <section id="alerts"></secti on>                           
      <h2 class="to_center">Edit: Office Document</h2>
      <hr>
      <div class="row">
        <form accept-charset="UTF-8" class="form-horizontal" method="post" enctype="multipart/form-data" id="office_document_form">
          <div class="quick-save pull-right hidden-xs">
            <button type="submit" class="btn btn-success btn-sm affix" value="Save Changes" id="save_changes_office"><i class="fa fa-save"></i> Quick Save </button>
          </div>
          <input type="hidden" value="<%= office_document.get('id') %>" name="restaurant_id">

          <h3 class="to_center">Address of the Restaurant</h3>

          <!-- render the text type for: block_info -->
          <%= partial('partials_markupText', {
            id: "block_info",
            placeholder: "Outlet/ Block number",
            label: "Outlet/ Block number",
            name: "block_info",
            value: office_document.get('block_info'),
            required: false
          }) %>

          <!-- render the text type for: building -->
          <%= partial('partials_markupText', {
            id: "building",
            placeholder: "Building name",
            label: "Building name",
            name: "building",
            value: office_document.get('building'),
            required: false
          }) %>

          <!-- render the text type for: latitude -->
          <%= partial('partials_markupText', {
            id: "latitude",
            placeholder: "Latitude",
            label: "Latitude",
            name: "latitude",
            value: office_document.get('latitude'),
            pattern: "-?\\d{1,3}\\.\\d+",
            required: false
          }) %>

          <!-- render the text type for: longitude -->
          <%= partial('partials_markupText', {
            id: "longitude",
            placeholder: "Longitude",
            label: "Longitude",
            name: "longitude",
            value: office_document.get('longitude'),
            pattern: "-?\\d{1,3}\\.\\d+",
            required: false
          }) %>

          <div class="form-group hidden" id="locality_detect_loader">
            <div class="col-xs-8 col-xs-offset-4">
              <i class="fa fa-circle-o-notch fa-spin"></i> <span class="muted">Automatically fetching locality</span>
            </div>
          </div>

          <div class="form-group hidden" id="locality_detect_error">
            <div class="col-xs-8 col-xs-offset-4">
              <span class="muted text-danger"> Could not fetch the locality. Try checking the coordinates or manually enter the locality & sub-locality</span>
            </div>
          </div>

          <!--<div class="form-group adjust-xs">
            <label for="locality_filter" class="col-md-4 control-label">Locality</label>
            <div class="col-md-8">
            <input type="hidden" name="locality_filter" id="locality_filter" <% if(office_document.get("locality_id")){ %> value = "<%= get_parent_id(office_document.get('locality_id')) %>" <% } %>>
            </div>
          </div>-->

          <div class="form-group adjust-xs">
            <label for="locality_id" class="col-md-4 control-label">Locality</label>
            <div class="col-md-8">
              <input type="hidden" id="locality_id" name="locality_id" <% if(office_document.get("locality_id")){ %><% if (get_parent_id(office_document.get('locality_id')) != null) { %> value = "<%= get_parent_id(office_document.get('locality_id')) %>" <% }else{ %> value = "<%= office_document.get('locality_id') %>" <% } %> <% } %> >
            </div>
          </div>

          <%= partial('partials_markupText', {
            id: "locality",
            placeholder: "Landmark",
            label: "Restaurant Location (will be displayed on APP)",
            name: "locality",
            value: office_document.get('locality'),
            required: true
          }) %>

          <!-- render the text type for: longitude -->
          <%= partial('partials_markupText', {
            id: "pin_code",
            placeholder: "Pin Code",
            label: "Pin Code",
            name: "pin_code",
            value: office_document.get('pin_code'),
            required: false
          }) %>

          <hr>

          <!-- Phone numbers for phone_numbers -->
          <h4 class="to_center">Restaurant Phone Numbers for Menu</h4>
          <input type="hidden" name="phone_numbers_count" value="<%=office_document.get('phone_numbers').length%>"
          
          <hr>
          <% _.each(office_document.get('phone_numbers'), function(phone_number, i) { %>
            <%= 
              partial('partials_contactNumber', {
                id: phone_number._id,
                markup_hidden_name: "phone_numbers_" + i + "_id",
                markup_hidden_index: "phone_numbers_" + i,
                markup_select_name: "phone_numbers_" + i + "_number_type",
                markup_input_name: "phone_numbers_" + i + "_number",
                markup_to_delete: "phone_numbers_" + i + "_delete",
                i: i,
                number: phone_number.number,
                contact_number_types: window.collections.contact_number_types,
                number_type: phone_number.number_type,
                sms: false,
                is_present_on_counter: false,
                is_smartphone: false,
                is_verified: false
              })
            %>
          <% }) %>

          <button type="button" class="btn btn-info btn-sm add_new_number">Add new Phone Number</button>

          <hr>
          <div class="form-group">
            <div class="col-xs-1 visible-xs"></div>
            <label for="next_menu_update" class="col-md-4 col-sm-4 col-xs-4 control-label">Next Menu Update</label>
            <div class="col-md-6 col-sm-6 col-xs-6">
              <select name="next_menu_update" class="form-inline-element input-sm" id="next_menu_update">
                  <option disabled selected>none</option>
                <% _.each(window.collections.months, function(i,month) {%>
                  <option value="<%= i %>" <% if(office_document.get("next_menu_update") == i){%><%="selected"%><%  } %> > <%= month%></option>
                <% }) %>
              </select>
            </div>
          </div>
          <!-- markup for: veg_type -->
          <%= partial("partials_markupSelect", {
            id: "veg_type",
            placeholder: "Type of Restaurant",
            label: "Type of Restaurant",
            name: "veg_type",
            value: office_document.get("veg_type"),
            required: false,
            collection: window.collections.dish_types
          }) %>

          <div class="form-group">
            <div class="col-xs-1 visible-xs"></div>
            <label class="col-sm-4 col-xs-4 control-label" for="automatically_confirm_after_place">Automatically confirm order after placing</label>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="automatically_confirm_after_place" <% if(office_document.get("automatically_confirm_after_place")){%> <%="checked"%><% } %>>                          
                    </label>
                </div>
            </div>
          </div>

          <div class="form-group">
            <div class="col-xs-1 visible-xs"></div>
            <label class="col-sm-4 col-xs-4 control-label" for="call_as_user">Call as User</label>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="call_as_user" <% if(office_document.get("call_as_user")){%> <%= "checked" %> <% } %> >                        
                    </label>
                </div>
            </div>
          </div>

          <div class="form-group">
            <div class="col-xs-1 visible-xs"></div>
            <label class="col-sm-4 col-xs-4 control-label" for="tied_up">Tied up?</label>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="tied_up" <% if(office_document.get("tied_up")){%> <%= "checked" %> <% } %> >                        
                    </label>
                </div>
            </div>
          </div>

          <div class="form-group">
            <div class="col-xs-1 visible-xs"></div>
            <label class="col-sm-4 col-xs-4 control-label" for="has_delivery">Has delivery: </label>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" name="has_delivery" <% if(office_document.get("has_delivery")){%> <%= "checked" %> <% } %> >                        
                    </label>
                </div>
            </div>
          </div>

          <!-- markup for: jain_food_available -->
          <%= partial("partials_markupSelect", {
            id: "jain_food_available",
            placeholder: "Yes/ No",
            label: "Is Jain food available?",
            name: "jain_food_available",
            value: office_document.get("jain_food_available"),
            required: false,
            collection: window.collections.boolean
          }) %>
          <hr/>

          <!-- Phone numbers for phone_numbers -->
                             
           
          
          <div class="submit_div">
            <input type="submit" class="btn btn-primary" value="Save Changes" id="save_changes_office">
          </div>

        </form>
      </div>
      </div>
    </div><!-- end well -->
  </div>

</div><!-- end row -->